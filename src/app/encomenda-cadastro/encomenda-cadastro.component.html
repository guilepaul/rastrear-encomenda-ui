<div class="ui-g">
  <div class="ui-g-12">
    <h1>Rastrear Encomenda</h1>
  </div>
</div>

<form>
  <div class="ui-g">
    <div class="ui-g-8 ui-fluid">
      <label>Cliente</label>
      <p-dropdown id="cliente" name="cliente"
        [autoWidth]="false" placeholder="Selecione.."
        [options]="clientes" optionLabel="nome"
        [(ngModel)]="encomenda.cliente" required></p-dropdown>
    </div>

    <div class="ui-g-12">
      <p-panel header="Steps">
        <div class="ui-g">
          <div class="ui-g-8 ui-fluid">
            <label>Codigo de Rastreio</label>
            <p-dropdown id="local" name="local"
            [autoWidth]="false" placeholder="Selecione..."
            [options]="locais" optionLabel="nome"
            [(ngModel)]="step.local" #local></p-dropdown>
          </div>

          <div class="ui-g-3 ui-fluid">
            <label>Data</label>
            <p-calendar id="recebimento" name="recebimento"
              [ngModel] ="step.recebimento | date:'yyyy-MM-dd'" #data></p-calendar>
          </div>

          <div class="ui-g-1 ui-fluid">
            <br>
            <button pButton type="button" icon="pi pi-plus"
               (click)="incluirStep()"
               [disabled]="!local.value || !data.value">
            </button>
          </div>

          <div class="ui-g-12">
              <p-table [value]="encomenda.steps" responsive="true">
                <ng-template pTemplate="header">
                  <tr>
                    <th>Código</th>
                    <th>Local</th>
                    <th>Data</th>
                  </tr>
                </ng-template>

                <ng-template pTemplate="body" let-step>
                  <tr>
                    <td>
                      <span class="ui-column-title">Código</span>
                      {{ step.local.id }}
                    </td>
                    <td>
                      <span class="ui-column-title">Local</span>
                      {{ step.local.nome }}
                    </td>
                    <td>
                      <span class="ui-column-title">Data</span>
                      {{ step.recebimento }}
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
        </div>
      </p-panel>
    </div>
    </div>
</form>
